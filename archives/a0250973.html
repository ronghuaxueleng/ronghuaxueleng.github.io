<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <meta name="robots" content="index, follow">
  <!-- title -->
  
    
  <title>学习 ui-router - 路由控制 - 白云雅阁</title>
    
  
  
  <!-- open graph -->
  <meta name="description" content="参考原文：https:&#x2F;&#x2F;github.com&#x2F;angular-ui&#x2F;ui-router&#x2F;wiki&#x2F;URL-Routing 在你的应用中大多数状态都有与其相关联的 url，路由控制不是设计完成 state 之后的事后想法，而是开始开发时就应该考虑的问题。 这里是如何设置一个基本url。 12345$stateProvider    .state(&#x27;contacts&#x27;, &amp;#12">
<meta property="og:type" content="article">
<meta property="og:title" content="学习 ui-router - 路由控制">
<meta property="og:url" content="http://ronghuaxueleng.github.io/archives/a0250973.html">
<meta property="og:site_name" content="白云雅阁">
<meta property="og:description" content="参考原文：https:&#x2F;&#x2F;github.com&#x2F;angular-ui&#x2F;ui-router&#x2F;wiki&#x2F;URL-Routing 在你的应用中大多数状态都有与其相关联的 url，路由控制不是设计完成 state 之后的事后想法，而是开始开发时就应该考虑的问题。 这里是如何设置一个基本url。 12345$stateProvider    .state(&#x27;contacts&#x27;, &amp;#12">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-08-06T00:00:00.000Z">
<meta property="article:modified_time" content="2025-03-09T08:43:48.231Z">
<meta property="article:author" content="ronghuaxueleng">
<meta property="article:tag" content="angularjs">
<meta name="twitter:card" content="summary">
  <!-- canonical -->
  
  <link rel="canonical" href="http://ronghuaxueleng.github.io/archives/a0250973.html">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <!-- CSS -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 7.3.0"></head>

    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">白云雅阁</a>
    <!-- <div class="logo"><a href="/" title="Len"><img src="/img/logo.svg" alt="Len" aria-label="logo" height="20"></a></div> -->
        <ul class="nav">
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
        </ul>


    </a>
</div>

                
                <div class="post-main">
    
        <div class="post-main-title">
            学习 ui-router - 路由控制
        </div>
        <div class="post-meta">
            2016-08-06 ｜ 
            
                <a href="/categories/angularjs/"># angularjs</a>
            
        </div>
        <!-- 圆角分类 -->
        <!-- <div class="tags"> -->
            <!--  -->
                <!-- <a href="/categories/angularjs/">angularjs</a> -->
            <!--  -->
        <!-- </div> -->
        <div class="post-md">
            <p>参考原文：<a href="https://github.com/angular-ui/ui-router/wiki/URL-Routing">https://github.com/angular-ui/ui-router/wiki/URL-Routing</a></p>
<p>在你的应用中大多数状态都有与其相关联的 url，路由控制不是设计完成 state 之后的事后想法，而是开始开发时就应该考虑的问题。</p>
<p>这里是如何设置一个基本url。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider</span><br><span class="line">    .<span class="title function_">state</span>(<span class="string">&#x27;contacts&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;/contacts&quot;</span>,</span><br><span class="line">        <span class="attr">templateUrl</span>: <span class="string">&#x27;contacts.html&#x27;</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>当我们访问<code>index.html/contacts</code>时， <code>&#39;contacts&#39;</code>状态将被激活，同时<code>index.html</code>中的<code>ui-view</code>将被<code>&#39;contacts.html&#39;</code>填充。或者，通过<code>transitionTo(&#39;contacts&#39;)</code>方法将状态转变到<code>&#39;contacts&#39;</code>状态，同时 url 将更新为<code>index.html/contacts</code>。</p>
<span id="more"></span>

<h2 id="URL参数"><a href="#URL参数" class="headerlink" title="URL参数"></a>URL参数</h2><h3 id="基本参数"><a href="#基本参数" class="headerlink" title="基本参数"></a>基本参数</h3><p>通常，url动态部分被称为参数，有几个选项用于指定参数。基本参数如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider</span><br><span class="line">    .<span class="title function_">state</span>(<span class="string">&#x27;contacts.detail&#x27;</span>, &#123;</span><br><span class="line">        <span class="comment">// 这里设置了url参数</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;/contacts/:contactId&quot;</span>,</span><br><span class="line">        <span class="attr">templateUrl</span>: <span class="string">&#x27;contacts.detail.html&#x27;</span>,</span><br><span class="line">        <span class="attr">controller</span>: <span class="keyword">function</span> (<span class="params">$stateParams</span>) &#123;</span><br><span class="line">            <span class="comment">// If we got here from a url of /contacts/42</span></span><br><span class="line">            <span class="title function_">expect</span>($stateParams).<span class="title function_">toBe</span>(&#123;<span class="attr">contactId</span>: <span class="number">42</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>或者，你也可以使用花括号的方式来指定参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 与前面的设置方法等效</span></span><br><span class="line"><span class="attr">url</span>: <span class="string">&quot;/contacts/&#123;contactId&#125;&quot;</span> </span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<ul>
<li><code>&#39;/hello/&#39;</code> - 只匹配<code>&#39;/hello/&#39;</code>路径，没有对斜杠进行特殊处理，这种模式将匹配整个路径，而不仅仅是一个前缀。</li>
<li><code>&#39;/user/:id&#39;</code> - 匹配<code>&#39;/user/bob&#39;</code>、<code>&#39;/user/1234!!!&#39;</code>，甚至还匹配 <code>&#39;/user/&#39;</code>，但是不匹配<code>&#39;/user&#39;</code>和<code>&#39;/user/bob/details&#39;</code>。第二个路径段将被捕获作为参数<code>&quot;id&quot;</code>。</li>
<li><code>&#39;/user/&#123;id&#125;&#39;</code> - 与前面的示例相同,但使用花括号语法。</li>
</ul>
<h3 id="含正则表达式的参数"><a href="#含正则表达式的参数" class="headerlink" title="含正则表达式的参数"></a>含正则表达式的参数</h3><p>使用花括号的方式可以设置一个正则表达式规则的参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只会匹配 contactId 为1到8位的数字</span></span><br><span class="line"><span class="attr">url</span>: <span class="string">&quot;/contacts/&#123;contactId:[0-9]&#123;1,8&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<ul>
<li><code>&#39;/user/&#123;id:[^/]*&#125;&#39;</code> - 与<code>&#39;/user/&#123;id&#125;&#39;</code>相同</li>
<li><code>&#39;/user/&#123;id:[0-9a-fA-F]&#123;1,8&#125;&#125;&#39;</code> - 与前面的示例相似，但只匹配1到8为的数字和字符</li>
<li><code>&#39;/files/&#123;path:.*&#125;&#39;</code> - 匹配任何以<code>&#39;/files/&#39;</code>开始的URL路径，并且捕获剩余路径到参数<code>&#39;path&#39;</code>中。</li>
<li><code>&#39;/files/*path&#39;</code> - 与前面相同，捕获所有特殊的语法。</li>
</ul>
<p><strong>警告：</strong>不要把捕获圆括号写进正则表达式，ui-router 的 UrlMatcher 将为整个正则表达式添加捕获。</p>
<h3 id="Query-Parameters"><a href="#Query-Parameters" class="headerlink" title="Query Parameters"></a>Query Parameters</h3><p>可以通过<code>?</code>来指定参数作为查询参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url</span>: <span class="string">&quot;/contacts?myParam&quot;</span></span><br><span class="line"><span class="comment">// 匹配 &quot;/contacts?myParam=value&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果你需要不止一个查询参数，请用<code>&amp;</code>分隔：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url</span>: <span class="string">&quot;/contacts?myParam1&amp;myParam2&quot;</span></span><br><span class="line"><span class="comment">// 匹配 &quot;/contacts?myParam1=value1&amp;myParam2=wowcool&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="嵌套状态的路由控制"><a href="#嵌套状态的路由控制" class="headerlink" title="嵌套状态的路由控制"></a>嵌套状态的路由控制</h2><h3 id="附加的方式（默认）"><a href="#附加的方式（默认）" class="headerlink" title="附加的方式（默认）"></a>附加的方式（默认）</h3><p>在嵌套状态的路由控制中，默认方式是子状态的 url 附加到父状态的 url 之后。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider</span><br><span class="line">  .<span class="title function_">state</span>(<span class="string">&#x27;contacts&#x27;</span>, &#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;/contacts&#x27;</span>,</span><br><span class="line">     ...</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">state</span>(<span class="string">&#x27;contacts.list&#x27;</span>, &#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;/list&#x27;</span>,</span><br><span class="line">     ...</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>路由将成为：</p>
<ul>
<li><code>&#39;contacts&#39;</code>状态将匹配<code>&quot;/contacts&quot;</code></li>
<li><code>&#39;contacts.list&#39;</code>状态将匹配<code>&quot;/contacts/list&quot;</code>。子状态的url是附在父状态的url之后的。</li>
</ul>
<h3 id="绝对路由（-）"><a href="#绝对路由（-）" class="headerlink" title="绝对路由（^）"></a>绝对路由（^）</h3><p>如果你使用绝对 url 匹配的方式，那么你需要给你的url字符串加上特殊符号<code>&quot;^&quot;</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider</span><br><span class="line">  .<span class="title function_">state</span>(<span class="string">&#x27;contacts&#x27;</span>, &#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;/contacts&#x27;</span>,</span><br><span class="line">     ...</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">state</span>(<span class="string">&#x27;contacts.list&#x27;</span>, &#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;^/list&#x27;</span>,</span><br><span class="line">     ...</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>路由将成为：</p>
<ul>
<li><code>&#39;contacts&#39;</code>状态将匹配<code>&quot;/contacts&quot;</code></li>
<li><code>&#39;contacts.list&#39;</code>状态将匹配<code>&quot;/list&quot;</code>。子状态的url没有附在父状态的url之后的，因为使用了<code>^</code>。</li>
</ul>
<h2 id="stateParams-服务"><a href="#stateParams-服务" class="headerlink" title="$stateParams 服务"></a>$stateParams 服务</h2><p>之前看到的<code>$stateParams</code>服务是一个对象，包含 url 中每个参数的键&#x2F;值。<code>$stateParams</code>可以为控制器或者服务提供 url 的各个部分。<br><strong>注意：</strong><code>$stateParams</code>服务必须与一个控制器相关，并且<code>$stateParams</code>中的“键&#x2F;值”也必须事先在那个控制器的<code>url</code>属性中有定义。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果状态中 url 属性是：</span></span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;/users/:id/details/&#123;type&#125;/&#123;repeat:[0-9]+&#125;?from&amp;to&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当浏览</span></span><br><span class="line"><span class="string">&#x27;/users/123/details//0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $stateParams 对象将是</span></span><br><span class="line">&#123; <span class="attr">id</span>:<span class="string">&#x27;123&#x27;</span>, <span class="attr">type</span>:<span class="string">&#x27;&#x27;</span>, <span class="attr">repeat</span>:<span class="string">&#x27;0&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当浏览</span></span><br><span class="line"><span class="string">&#x27;/users/123/details/default/0?from=there&amp;to=here&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $stateParams 对象将是</span></span><br><span class="line">&#123; <span class="attr">id</span>:<span class="string">&#x27;123&#x27;</span>, <span class="attr">type</span>:<span class="string">&#x27;default&#x27;</span>, <span class="attr">repeat</span>:<span class="string">&#x27;0&#x27;</span>, <span class="attr">from</span>:<span class="string">&#x27;there&#x27;</span>, <span class="attr">to</span>:<span class="string">&#x27;here&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-stateParams的两个陷阱"><a href="#使用-stateParams的两个陷阱" class="headerlink" title="使用$stateParams的两个陷阱"></a>使用<code>$stateParams</code>的两个陷阱</h3><ul>
<li>只有当状态被激活并且状态的所有依赖项都被注入时，<code>$stateParams</code>对象才存在。这代表你不能再状态的<code>resolve</code>函数中使用<code>$stateParams</code>对象，可以使用<code>$state.current.params</code>来代替。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider.<span class="title function_">state</span>(<span class="string">&#x27;contacts.detail&#x27;</span>, &#123;  </span><br><span class="line">   <span class="attr">resolve</span>: &#123; </span><br><span class="line">      <span class="attr">someResolve</span>: <span class="keyword">function</span>(<span class="params">$state</span>)&#123; </span><br><span class="line">         <span class="comment">//*** 不能在这里使用 $stateParams , the service is not ready ***//</span></span><br><span class="line">         <span class="comment">//*** 使用 $state.current.params 来代替 ***//</span></span><br><span class="line">         <span class="keyword">return</span> $state.<span class="property">current</span>.<span class="property">params</span>.<span class="property">contactId</span> + <span class="string">&quot;!&quot;</span> </span><br><span class="line">      &#125;; </span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>在状态控制器中，<code>$stateParams</code>对象只包含那些在状态中定义的参数，因此你不能访问在其他状态或者祖先状态中定义的参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$stateProvider.<span class="title function_">state</span>(<span class="string">&#x27;contacts.detail&#x27;</span>, &#123;</span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;/contacts/:contactId&#x27;</span>,   </span><br><span class="line">   <span class="attr">controller</span>: <span class="keyword">function</span>(<span class="params">$stateParams</span>)&#123;</span><br><span class="line">      $stateParams.<span class="property">contactId</span>  <span class="comment">//*** Exists! ***//</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;).<span class="title function_">state</span>(<span class="string">&#x27;contacts.detail.subitem&#x27;</span>, &#123;</span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;/item/:itemId&#x27;</span>, </span><br><span class="line">   <span class="attr">controller</span>: <span class="keyword">function</span>(<span class="params">$stateParams</span>)&#123;</span><br><span class="line">      $stateParams.<span class="property">contactId</span> <span class="comment">//*** 注意! DOESN&#x27;T EXIST!! ***//</span></span><br><span class="line">      $stateParams.<span class="property">itemId</span> <span class="comment">//*** Exists! ***//  </span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="urlRouterProvider"><a href="#urlRouterProvider" class="headerlink" title="$urlRouterProvider"></a>$urlRouterProvider</h2><p><code>$urlRouterProvider</code>负责处理在状态配置中指定的url路由方式之外的 url 请求的路由方式。<code>$urlRouterProvider</code>负责监视<code>$location</code>，当<code>$location</code>改变后，<code>$urlRouterProvider</code>将从一个列表，一个接一个查找匹配项，直到找到。所有 url 都编译成一个<code>UrlMatcher</code>对象。</p>
<p><code>$urlRouterProvider</code>有一些实用的方法，可以在<code>module.config</code>中直接使用。</p>
<p><strong><code>when()</code> for redirection 重定向</strong></p>
<p>参数：</p>
<ul>
<li><code>what</code> <strong>String | RegExp | UrlMatcher</strong>，你想重定向的传入路径</li>
<li><code>handler</code> <strong>String | Function</strong> 将要重定向到的路径</li>
</ul>
<p><code>handler</code> 作为 <strong>String</strong><br>如果<code>handler</code>是字符串，它被视为一个重定向，并且根据匹配语法决定重定向的地址。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">config</span>(<span class="keyword">function</span>(<span class="params">$urlRouterProvider</span>)&#123;</span><br><span class="line">    <span class="comment">// when there is an empty route, redirect to /index   </span></span><br><span class="line">    $urlRouterProvider.<span class="title function_">when</span>(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;/index&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// You can also use regex for the match parameter</span></span><br><span class="line">    $urlRouterProvider.<span class="title function_">when</span>(<span class="string">&#x27;/aspx/i&#x27;</span>, <span class="string">&#x27;/index&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>handler</code> 作为 <strong>Function</strong><br>如果<code>handler</code>是一个函数，这个函数是注入一些服务的。如果<code>$location</code>匹配成功，函数将被调用。你可以选择性注入<code>$match</code>。</p>
<p>函数可以返回：</p>
<ul>
<li><strong>falsy</strong> 表明规则不匹配，<code>$urlRouter</code>将试图寻找另一个匹配</li>
<li><strong>String</strong> 该字符串作为重定向地址并且作为参数传递给<code>$location.url()</code></li>
<li><strong>nothing</strong>或者任何为真的值，告诉<code>$urlRouter</code>url 已经被处理</li>
</ul>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$urlRouterProvider.<span class="title function_">when</span>(state.<span class="property">url</span>, [<span class="string">&#x27;$match&#x27;</span>, <span class="string">&#x27;$stateParams&#x27;</span>, <span class="keyword">function</span> (<span class="params">$match, $stateParams</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ($state.<span class="property">$current</span>.<span class="property">navigable</span> != state || !<span class="title function_">equalForKeys</span>($match, $stateParams)) &#123;</span><br><span class="line">        $state.<span class="title function_">transitionTo</span>(state, $match, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>

<p><strong><code>otherwise()</code> 无效路由</strong></p>
<p>参数：</p>
<ul>
<li><code>path</code> <strong>String | Function</strong> 你想重定向url路径或者一个函数返回url路径。函数可以包含<code>$injector</code>和<code>$location</code>两个参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">config</span>(<span class="keyword">function</span>(<span class="params">$urlRouterProvider</span>)&#123;</span><br><span class="line">    <span class="comment">// 在配置（状态配置和when()方法）中没有找到url的任何匹配</span></span><br><span class="line">    <span class="comment">// otherwise will take care of routing the user to the specified url</span></span><br><span class="line">    $urlRouterProvider.<span class="title function_">otherwise</span>(<span class="string">&#x27;/index&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Example of using function rule as param</span></span><br><span class="line">    $urlRouterProvider.<span class="title function_">otherwise</span>(<span class="keyword">function</span>(<span class="params">$injector, $location</span>)&#123;</span><br><span class="line">        ... some advanced code...</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong><code>rule()</code> 自定义url处理</strong></p>
<p>参数：</p>
<ul>
<li><code>handler</code> <strong>Function</strong> 一个函数，包含<code>$injector</code>和<code>$location</code>两个服务作为参数，函数负责返回一个有效的路径的字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">config</span>(<span class="keyword">function</span>(<span class="params">$urlRouterProvider</span>)&#123;</span><br><span class="line">    <span class="comment">// Here&#x27;s an example of how you might allow case insensitive urls</span></span><br><span class="line">    $urlRouterProvider.<span class="title function_">rule</span>(<span class="keyword">function</span> (<span class="params">$injector, $location</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> path = $location.<span class="title function_">path</span>(), normalized = path.<span class="title function_">toLowerCase</span>();</span><br><span class="line">        <span class="keyword">if</span> (path != normalized) <span class="keyword">return</span> normalized;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="urlMatcherFactory-和-UrlMatchers"><a href="#urlMatcherFactory-和-UrlMatchers" class="headerlink" title="$urlMatcherFactory 和 UrlMatchers"></a>$urlMatcherFactory 和 UrlMatchers</h2><p>定义了url模式和参数占位符的语法。<code>$urlMatcherFactory</code>是在幕后被<code>$urlRouterProvider</code>调用，来缓存编译后的<code>UrlMatcher</code>对象，而不必在每次 location 改变后重新解析url。大多数用户不需要直接使用<code>$urlMatcherFactory</code>方法，但是在状态配置中非常实用，可以使用<code>$urlMatcherFactory</code>方法来生成一个<code>UrlMatcher</code>对象，并在状态配置中使用该对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> urlMatcher = $urlMatcherFactory.<span class="title function_">compile</span>(<span class="string">&quot;/home/:id?param1&quot;</span>);</span><br><span class="line">$stateProvider.<span class="title function_">state</span>(<span class="string">&#x27;myState&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">url</span>: urlMatcher </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
        </div>
    
<!-- tags -->

    <div class="post-meta">
        标签：
        
            <a href="/tags/angularjs/"> / angularjs</a>
        
    </div>

</div>
                <div class="footer">
    <span>Copyright © <script>document.write(new Date().getFullYear())</script> 白云雅阁</span>
    <span>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https:///imzl.com/zenmind">ZenMind</a></span>
    <span>备案号<a href="https://beian.miit.gov.cn/" target="_blank">京ICP备2024093046号-1</a></span>
</div>

<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>

<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>