<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <meta name="robots" content="index, follow">
  <!-- title -->
  
    
  <title>Shadow DOM - ç™½äº‘é›…é˜</title>
    
  
  
  <!-- open graph -->
  <meta name="description" content="Shadow DOM æ˜¯å››å¤§ç½‘ç»œç»„ä»¶æ ‡å‡†ä¹‹ä¸€ï¼Œæä¾› CSS ä½œç”¨åŸŸã€DOM å°è£…å’Œç»„åˆ(Composition) ç­‰ä¼˜åŠ¿ï¼Œæ„å»ºè‡ªå®šä¹‰å…ƒç´ ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Shadow DOM">
<meta property="og:url" content="http://ronghuaxueleng.github.io/archives/2fd7dbc7.html">
<meta property="og:site_name" content="ç™½äº‘é›…é˜">
<meta property="og:description" content="Shadow DOM æ˜¯å››å¤§ç½‘ç»œç»„ä»¶æ ‡å‡†ä¹‹ä¸€ï¼Œæä¾› CSS ä½œç”¨åŸŸã€DOM å°è£…å’Œç»„åˆ(Composition) ç­‰ä¼˜åŠ¿ï¼Œæ„å»ºè‡ªå®šä¹‰å…ƒç´ ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/shadow-dom.png">
<meta property="og:image" content="http://7vikhl.com1.z0.glb.clouddn.com/FF183E44-E19D-4B24-918B-2DE5067699A4.png">
<meta property="article:published_time" content="2017-11-09T00:00:00.000Z">
<meta property="article:modified_time" content="2025-03-09T08:43:48.393Z">
<meta property="article:author" content="ronghuaxueleng">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://7vikhl.com1.z0.glb.clouddn.com/shadow-dom.png">
  <!-- canonical -->
  
  <link rel="canonical" href="http://ronghuaxueleng.github.io/archives/2fd7dbc7.html">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <!-- CSS -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 7.3.0"></head>

    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">ç™½äº‘é›…é˜</a>
    <!-- <div class="logo"><a href="/" title="Len"><img src="/img/logo.svg" alt="Len" aria-label="logo" height="20"></a></div> -->
        <ul class="nav">
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
        </ul>


    </a>
</div>

                
                <div class="post-main">
    
        <div class="post-main-title">
            Shadow DOM
        </div>
        <div class="post-meta">
            2017-11-09 ï½œ 
            
                <a href="/categories/javascript/"># javascript</a>
            
        </div>
        <!-- åœ†è§’åˆ†ç±» -->
        <!-- <div class="tags"> -->
            <!--  -->
                <!-- <a href="/categories/javascript/">javascript</a> -->
            <!--  -->
        <!-- </div> -->
        <div class="post-md">
            <p><img src="http://7vikhl.com1.z0.glb.clouddn.com/shadow-dom.png"><br>Shadow DOM æ˜¯å››å¤§ç½‘ç»œç»„ä»¶æ ‡å‡†ä¹‹ä¸€ï¼Œæä¾› CSS ä½œç”¨åŸŸã€DOM å°è£…å’Œç»„åˆ(Composition) ç­‰ä¼˜åŠ¿ï¼Œæ„å»ºè‡ªå®šä¹‰å…ƒç´ ã€‚</p>
<span id="more"></span>

<h2 id="ä»€ä¹ˆæ˜¯-Shadow-DOM"><a href="#ä»€ä¹ˆæ˜¯-Shadow-DOM" class="headerlink" title="ä»€ä¹ˆæ˜¯ Shadow DOM"></a>ä»€ä¹ˆæ˜¯ Shadow DOM</h2><p>æµè§ˆå™¨åœ¨è§£æç½‘é¡µæ–‡æ¡£çš„æ—¶å€™ï¼Œä¼šå°† HTML æ ‡ç­¾è½¬æ¢æˆèŠ‚ç‚¹ï¼Œä¸ºäº†ä¿æŒé¡µé¢çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™äº›èŠ‚ç‚¹æ„æˆä¸€ä¸ªèŠ‚ç‚¹æ ‘ï¼Œè¿™ä¸ªç»“æ„å°±æ˜¯ DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ã€‚DOM å°†æ–‡æ¡£ä½œä¸ºä¸€ä¸ªç»“æ„åŒ–çš„èŠ‚ç‚¹ç»„ä»¥åŠåŒ…å«å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ï¼Œæ˜¯ HTML çš„ç¼–ç¨‹æ¥å£ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ JavaScript æ¥è®¿é—®æ“çºµ DOMã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const header = document.createElement(&#x27;header&#x27;);</span><br><span class="line">const h1 = document.createElement(&#x27;h1&#x27;);</span><br><span class="line">h1.textContent = &#x27;Hello world!&#x27;;</span><br><span class="line">header.appendChild(h1);</span><br><span class="line">document.body.appendChild(header);</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µ JavaScript ä»£ç æ‰§è¡Œåä¼šç”Ÿæˆå¦‚ä¸‹çš„ DOM ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;h1&gt;Hello DOM&lt;/h1&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>é‚£ä»€ä¹ˆæ˜¯ Shadow DOM å‘¢â“<br>Shadow DOM ä¸º Web ç»„ä»¶ä¸­çš„ DOM å’Œ CSS æä¾›äº†å°è£…ã€‚Shadow DOM ä½¿å¾—è¿™äº›ä¸œè¥¿ä¸ä¸»æ–‡æ¡£çš„ DOM ä¿æŒåˆ†ç¦»ã€‚Shadow DOM ä¸æ™®é€šçš„ DOM çš„åŒºåˆ«æ˜¯ï¼š<br>ğŸ‘‰ é€šå¸¸åˆ›å»ºæ–°çš„ DOM èŠ‚ç‚¹é™„åŠ åˆ°å…¶ä»– DOM å…ƒç´ ä¸Šï¼Œå°±ä¼šæˆä¸ºå…¶å­èŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰ï¼›ä½†å€ŸåŠ© Shadow DOMï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª  DOM æ ‘é™„åŠ åˆ°å…¶ä»–å…ƒç´ ä¸Šï¼Œè¿™ä¸ª DOM æ ‘å¹¶éå…¶å­èŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰ï¼Œå…¶æ‹¥æœ‰è‡ªèº«çš„ä½œç”¨åŸŸèŒƒå›´ï¼Œè¿™ä¸ª DOM æ ‘ç§°ä¸ºï¼š**<code>shadwo tree</code>**ã€‚è¢«é™„åŠ çš„å…ƒç´ ç§°ä¸º **<code>shadow host</code>**ï¼Œè¿™ä¸ª DOM æ ‘ç§°ä¸º **<code>shadow root</code>**ã€‚</p>
<blockquote>
<p>You can think of shadow DOM as a scoped subtree inside your element.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const header = document.createElement(&#x27;header&#x27;);</span><br><span class="line">const shadowRoot = header.attachShadow(&#123;mode: &#x27;open&#x27;&#125;);</span><br><span class="line">shadowRoot.innerHTML = &#x27;&lt;h1&gt;Hello Shadow DOM&lt;/h1&gt;&#x27;; // Could also use appendChild().</span><br><span class="line"></span><br><span class="line">// header.shadowRoot === shadowRoot</span><br><span class="line">// shadowRoot.host === header</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºå…ƒç´ åˆ›å»º shadow DOMï¼Œè°ƒç”¨ <code>element.attachShadow()</code></li>
<li>é€šè¿‡ <code>shadowRoot</code> å±æ€§è·å–å…ƒç´ é™„åŠ çš„ Shadow DOM</li>
<li>é€šè¿‡ shadow root çš„ <code>host</code> å±æ€§è·å–å…¶é™„å±çš„å…ƒç´ </li>
</ul>
<p>â—ï¸<strong>æ³¨æ„ï¼š</strong>å¹¶éæ‰€æœ‰å…ƒç´ éƒ½å¯ä»¥è°ƒç”¨ <code>element.attachShadow()</code> ä¸ºå…¶åˆ›å»ºæ·»åŠ  Shadow DOMï¼Œå› ä¸ºæœ‰äº›å…ƒç´ æµè§ˆå™¨å·²ç»ä¸ºå…¶æ·»åŠ äº† Shadow DOMï¼Œä¾‹å¦‚ <code>&lt;textarea&gt;</code> <code>&lt;input&gt;</code>ï¼›è€Œè¿˜æœ‰äº›å…ƒç´ ä¸ºå…¶æ·»åŠ  Shadow DOM æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œä¾‹å¦‚ <code>&lt;img&gt;</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.createElement(&#x27;input&#x27;).attachShadow(&#123;mode: &#x27;open&#x27;&#125;);</span><br><span class="line">// Error. `&lt;input&gt;` cannot host shadow dom.</span><br></pre></td></tr></table></figure>

<p>åœ¨åˆ›å»ºè‡ªå®šä¹‰å…ƒç´ æ—¶ï¼ŒShadow DOM å°¤å…¶æœ‰ç”¨ã€‚ä½¿ç”¨ Shadow DOM æ¥åˆ†éš”å…ƒç´ çš„ HTMLã€CSS å’Œ JSï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªç»„ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">window.customElements.define(&#x27;x-tag&#x27;, class extends HTMLElement &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super()</span><br><span class="line"></span><br><span class="line">    let shadowRoot = this.attachShadow(&#123;mode: &#x27;open&#x27;&#125;)</span><br><span class="line">    shadowRoot.innerHTML = `</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    b &#123;</span><br><span class="line">      color: red;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;b&gt;Hello world&lt;/b&gt;</span><br><span class="line">    `</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ Shadow DOM ä¸­çš„ CSS è§„åˆ™çš„ä½œç”¨åŸŸä»…é™äº <code>&lt;x-tag&gt;</code>ã€‚</p>
<h2 id="ç»„åˆå’Œ-slot"><a href="#ç»„åˆå’Œ-slot" class="headerlink" title="ç»„åˆå’Œ slot"></a>ç»„åˆå’Œ slot</h2><p>ç»„åˆæ˜¯ shadow DOM æœ€éš¾ç†è§£çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œä½†å¯ä»¥è¯´æ˜¯æœ€é‡è¦çš„åŠŸèƒ½ã€‚</p>
<h3 id="light-DOM-å’Œ-shadow-DOM"><a href="#light-DOM-å’Œ-shadow-DOM" class="headerlink" title="light DOM å’Œ shadow DOM"></a>light DOM å’Œ shadow DOM</h3><p><strong>light DOM</strong><br>ä½¿ç”¨ç»„ä»¶çš„ç”¨æˆ·ç¼–å†™çš„æ ‡è®°ï¼ŒDOM å…ƒç´ çš„å®é™…å­å…ƒç´ ï¼Œè¯¥å­å…ƒç´ ä¸åœ¨ç»„ä»¶çš„ shadow DOM ä¹‹å†…ï¼Œè¿™å°±æ˜¯ light DOMã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button is=&quot;better-button&quot;&gt;</span><br><span class="line">  &lt;!-- the image and span are better-button&#x27;s light DOM --&gt;</span><br><span class="line">  &lt;img src=&quot;gear.svg&quot; slot=&quot;icon&quot;&gt;</span><br><span class="line">  &lt;span&gt;Settings&lt;/span&gt;</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>image</code> å’Œ <code>span</code> å³æ˜¯ <code>button</code> çš„ light DOMã€‚</p>
<p><strong>shadow DOM</strong><br>ç»„ä»¶ä½œè€…ç¼–å†™çš„æ ‡è®°ï¼Œå®ƒå®šä¹‰ç»„ä»¶çš„å†…éƒ¨ç»“æ„ï¼Œä½œç”¨åŸŸ CSS ç­‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#shadow-root</span><br><span class="line">  &lt;style&gt;...&lt;/style&gt;</span><br><span class="line">  &lt;slot name=&quot;icon&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;span id=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;slot&gt;Button&lt;/slot&gt;</span><br><span class="line">  &lt;/span&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Flattened DOM tree</strong><br>æµè§ˆå™¨å°†ç”¨æˆ·çš„ light DOM åˆ†å¸ƒåˆ° shadow DOM ä¸­ï¼Œæ¸²æŸ“æˆä¸€é¢— DOM æ ‘ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º **<code>flattening the tree</code>**ï¼Œè¿™æ£µæ ‘ç§°ä¸ºæ‰å¹³æ ‘ **<code>Flattened DOM tree</code>**ã€‚ æ‰å¹³æ ‘ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ DevTools ä¸­æœ€ç»ˆçœ‹åˆ°çš„æ ‘ä»¥åŠåœ¨é¡µé¢ä¸Šæ¸²æŸ“çš„ç»“æœã€‚<br><img src="http://7vikhl.com1.z0.glb.clouddn.com/FF183E44-E19D-4B24-918B-2DE5067699A4.png"></p>
<h3 id="å…ƒç´ "><a href="#å…ƒç´ " class="headerlink" title=" å…ƒç´ "></a><slot> å…ƒç´ </h3><p>Shadow DOM ä½¿ç”¨ <code>&lt;slot&gt;</code> å…ƒç´ å°† light DOM æ ‘ç»„åˆåˆ° shadow DOM ä¸­ï¼Œå½¢æˆä¸€é¢— DOM æ ‘ã€‚</p>
<p>Slot ç›¸å½“äºæ˜¯ç»„ä»¶å†…éƒ¨çš„å ä½ç¬¦ï¼Œé€šè¿‡å®šä¹‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª <code>&lt;slot&gt;</code>ï¼Œå¯ä»¥å°†å¤–éƒ¨çš„æ ‡è®°å¼•å…¥åˆ°ç»„ä»¶ shadow DOM ä¸­è¿›è¡Œæ¸²æŸ“ï¼Œç›¸å½“äºâ€œè·¨åŸŸâ€äº† shadow DOM çš„è¾¹ç•Œï¼Œè¿™äº›å¼•å…¥åˆ° shadow DOM ä¸­çš„å…ƒç´ è¢«ç§°ä¸ºåˆ†å¸ƒå¼èŠ‚ç‚¹ **<code>distributed nodes</code>**ã€‚æ³¨æ„ï¼šslot å®é™…ä¸Šå¹¶ä¸ç§»åŠ¨è¿™äº›åˆ†å¸ƒå¼èŠ‚ç‚¹ï¼Œå®ƒä»¬åœ¨ shadow DOM å†…éƒ¨çš„å…¶ä»–ä½ç½®è¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>ç»„ä»¶å¯åœ¨å…¶ shadow DOM ä¸­å®šä¹‰é›¶ä¸ªæˆ–å¤šä¸ª slotã€‚Slot å¯ä»¥ä¸ºç©ºï¼Œæˆ–è€…æä¾›å›é€€å†…å®¹(fallback content)ï¼Œå¦‚æœç”¨æˆ·ä¸æä¾› light DOM å†…å®¹ï¼Œslot ä¼šå°†å¯¹å…¶å¤‡ç”¨å†…å®¹è¿›è¡Œæ¸²æŸ“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Default slot. If there&#x27;s more than one default slot, the first is used. --&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;slot&gt;Fancy button&lt;/slot&gt; &lt;!-- default slot with fallback content --&gt;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥åˆ›å»ºå‘½å slot (named slots)ï¼Œä½¿ç”¨ç»„ä»¶çš„ç”¨æˆ·é€šè¿‡åç§°æ‰¾åˆ°ç‰¹å®šçš„ slotã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;x-tag&gt;</span><br><span class="line">  &lt;p slot=&quot;title&quot;&gt;Custom Elements&lt;/p&gt;</span><br><span class="line">&lt;/x-tag&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#shadow-root</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  b &#123;</span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;b&gt;Hello world&lt;/b&gt;</span><br><span class="line">  &lt;slot name=&quot;title&quot;&gt;&lt;/slot&gt;</span><br></pre></td></tr></table></figure>

<h2 id="è®¾å®šæ ·å¼"><a href="#è®¾å®šæ ·å¼" class="headerlink" title="è®¾å®šæ ·å¼"></a>è®¾å®šæ ·å¼</h2><p>shadow DOM æœ€æœ‰ç”¨çš„åŠŸèƒ½æ˜¯ä½œç”¨åŸŸ CSSï¼š</p>
<ul>
<li>å¤–éƒ¨é¡µé¢ä¸­çš„ CSS é€‰æ‹©å™¨ä¸ä¼šåº”ç”¨äºç»„ä»¶å†…éƒ¨ã€‚</li>
<li>ç»„ä»¶å†…éƒ¨å®šä¹‰çš„æ ·å¼ä¹Ÿä¸ä¼šæ¸—å‡ºï¼Œå®ƒä»¬çš„ä½œç”¨åŸŸä»…é™äºå®¿ä¸»å…ƒç´ (shadow host)</li>
</ul>
<h3 id="é€šè¿‡é€‰æ‹©å™¨è®¾å®šæ ·å¼"><a href="#é€šè¿‡é€‰æ‹©å™¨è®¾å®šæ ·å¼" class="headerlink" title="é€šè¿‡é€‰æ‹©å™¨è®¾å®šæ ·å¼"></a>é€šè¿‡é€‰æ‹©å™¨è®¾å®šæ ·å¼</h3><p><strong>ä½¿ç”¨ <code>:host</code> ä¸ºç»„ä»¶ä¸ºè‡ªèº«è®¾å®šæ ·å¼</strong><br>éœ€è¦æ³¨æ„ï¼šå¤–éƒ¨é¡µé¢ä¸­ä¸ºç»„ä»¶è®¾å®šçš„æ ·å¼æ¯” <code>:host</code> è§„åˆ™å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºç»„ä»¶è‡ªèº«ï¼Œå¤–éƒ¨æ ·å¼ä¼˜å…ˆï¼Œç”¨æˆ·å¯ä»¥åœ¨å¤–éƒ¨è®¾ç½®ç»„ä»¶è‡ªèº«çš„æ ·å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å¤–éƒ¨æ ·å¼æ¯” :host ä¼˜å…ˆ</span><br><span class="line">x-tag &#123;</span><br><span class="line">  border: 1px solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#shadow-root</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  :host &#123;</span><br><span class="line">    border: 1px solid green;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ <code>:host(&lt;selector&gt;)</code> åŒ¹é…ç»„ä»¶è‡ªèº«ä¸åŒçŠ¶æ€</strong><br>é€šè¿‡ <code>:host(&lt;selector&gt;)</code> åŒ¹é…ä¸åŒçŠ¶æ€ï¼Œå¯¹ç»„ä»¶è‡ªèº«æˆ–è€…å†…éƒ¨èŠ‚ç‚¹è®¾å®šä¸åŒçš„æ ·å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#shadow-root</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  :host(:hover) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  :host(.red_bg) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  :host(.green_bg) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  :host(.disable) button &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ <code>:host-context(&lt;selector&gt;)</code> åŒ¹é…ä»»æ„çˆ¶çº§</strong><br>ä½¿ç”¨ <code>:host-context(&lt;selector&gt;)</code> ä¸»è¦ç”¨äºæ ¹æ®ç»„ä»¶æ‰€åœ¨çš„ç¯å¢ƒè¿›è¡Œä¸»é¢˜åŒ–ï¼ˆåŸºäºæƒ…å¢ƒè®¾å®šæ ·å¼ï¼‰ï¼Œä¾‹å¦‚è®¾ç½®ç™½å¤©æ¨¡å¼ï¼Œå¤œæ™šæ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨ <code>&lt;html&gt;</code> æˆ–è€… <code>&lt;body&gt;</code> è®¾å®šä¸åŒçš„ classï¼Œè€Œç»„ä»¶é€šè¿‡ <code>:host-context(&lt;selector&gt;)</code> å°±å¯ä»¥åŒ¹é…åˆ°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;body class=&quot;darktheme&quot;&gt;</span><br><span class="line">  &lt;fancy-tabs&gt;</span><br><span class="line">    ...</span><br><span class="line">  &lt;/fancy-tabs&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">#shadow-root</span><br><span class="line">  :host-context(.darktheme) &#123;</span><br><span class="line">    color: white;</span><br><span class="line">    background: black;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ <code>::slotted(&lt;compound-selector&gt;)</code> åŒ¹é…åˆ†å¸ƒåˆ° <slot> ä¸­çš„èŠ‚ç‚¹</strong><br>ä½¿ç”¨ <code>::slotted(&lt;compound-selector&gt;)</code> ä¸ºåˆ†å¸ƒå¼èŠ‚ç‚¹è®¾å®šæ ·å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;name-badge&gt;</span><br><span class="line">  #shadow-root</span><br><span class="line">    &lt;h2&gt;Eric Bidelman&lt;/h2&gt;</span><br><span class="line">    &lt;span class=&quot;title&quot;&gt;</span><br><span class="line">      Digital Jedi, &lt;span class=&quot;company&quot;&gt;Google&lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/name-badge&gt;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶çš„ shadow DOM å¯ä¸ºç”¨æˆ·çš„ <code>&lt;h2&gt;</code> å’Œ <code>.title</code> è®¾å®šæ ·å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  ::slotted(h2) &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    font-weight: 300;</span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line">  ::slotted(.title) &#123;</span><br><span class="line">     color: orange;</span><br><span class="line">  &#125;</span><br><span class="line">  /* DOESN&#x27;T WORK (can only select top-level nodes).</span><br><span class="line">  ::slotted(.company),</span><br><span class="line">  ::slotted(.title .company) &#123;</span><br><span class="line">    text-transform: uppercase;</span><br><span class="line">  &#125;</span><br><span class="line">  */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<br>â‘  ä½¿ç”¨ <code>::slotted(&lt;compound-selector&gt;)</code> åªèƒ½ä¸ºåˆ†å¸ƒèŠ‚ç‚¹çš„<strong>é¡¶çº§èŠ‚ç‚¹</strong>è®¾ç½®æ ·å¼ã€‚<br>â‘¡ slot å¹¶ä¸ä¼šç§»åŠ¨ light DOMï¼Œlight DOM èŠ‚ç‚¹åˆ†å¸ƒåˆ° shadow DOM ä¸­åï¼Œslot ä¼šå¯¹å…¶ DOM è¿›è¡Œæ¸²æŸ“ï¼Œæ ·å¼è®¾ç½®ï¼Œä½†æ˜¯èŠ‚ç‚¹å®é™…è¿˜æ˜¯ç•™åœ¨åŸå¤„ã€‚å¦‚æœå¤–éƒ¨å¯¹ light DOM è®¾ç½®äº†æ ·å¼ï¼Œé‚£ä¹ˆå¤–éƒ¨æ ·å¼å°†ä¼šè¦†ç›– shadow DOM ä¸­é€šè¿‡ <code>::slotted(&lt;compound-selector&gt;)</code> è®¾ç½®çš„æ ·å¼ï¼Œå…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  x-tag p &#123;</span><br><span class="line">    color: red; // å¤–éƒ¨æ ·å¼ï¼Œå…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;x-tag&gt;</span><br><span class="line">  &lt;p slot=&quot;title&quot;&gt;Custom Elements&lt;/p&gt;</span><br><span class="line">&lt;/x-tag&gt;</span><br><span class="line"></span><br><span class="line">#shadow-root</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  ::slotted(p) &#123;</span><br><span class="line">    color: green;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ä»å¤–éƒ¨ä¸ºç»„ä»¶è®¾å®šæ ·å¼"><a href="#ä»å¤–éƒ¨ä¸ºç»„ä»¶è®¾å®šæ ·å¼" class="headerlink" title="ä»å¤–éƒ¨ä¸ºç»„ä»¶è®¾å®šæ ·å¼"></a>ä»å¤–éƒ¨ä¸ºç»„ä»¶è®¾å®šæ ·å¼</h3><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»å¤–éƒ¨ä¸ºç»„ä»¶è®¾å®šæ ·å¼ï¼šæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ ‡è®°åç§°ä½œä¸ºé€‰æ‹©å™¨</p>
<p><strong>ä¸ºç»„ä»¶è‡ªèº«è®¾å®šæ ·å¼</strong><br>ä»å¤–éƒ¨ä¸ºç»„ä»¶è‡ªèº«è®¾å®šæ ·å¼æœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ç»„ä»¶æ ‡ç­¾åç§°ä½œä¸ºé€‰æ‹©å™¨ï¼Œè®¾ç½® CSS æ ·å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x-tag &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">x-tag:hover &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<strong>å¤–éƒ¨æ ·å¼æ€»æ˜¯ä¼˜å…ˆäºåœ¨ shadow DOM ä¸­å®šä¹‰çš„æ ·å¼ã€‚</strong>ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·åœ¨ç»„ä»¶å¤–éƒ¨ç¼–å†™ï¼š<code>fancy-tabs &#123; width: 500px; &#125;</code>ï¼Œå®ƒå°†ä¼˜å…ˆäºç»„ä»¶çš„è§„åˆ™ï¼š<code>:host &#123; width: 650px;&#125;</code>ã€‚</p>
<p><strong>ä¸ºç»„ä»¶å†…éƒ¨å…ƒç´ è®¾å®šæ ·å¼</strong><br>åœ¨ç»„ä»¶å¤–éƒ¨ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡é€‰æ‹©å™¨å¯¹ç»„ä»¶å†…çš„å…ƒç´ è®¾ç½®æ ·å¼ã€‚ç»„ä»¶æä¾›è‡ªå®šä¹‰å±æ€§ <strong>custom properties</strong>ï¼Œç›¸å½“äºæ˜¯æ ·å¼å ä½ç¬¦ï¼Œå¤–éƒ¨é€šè¿‡å¯¹è‡ªå®šä¹‰å±æ€§ <strong>custom properties</strong> æ¥è°ƒæ•´ç»„ä»¶å†…éƒ¨å…ƒç´ çš„æ ·å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<code>&lt;fancy-tabs&gt;</code> å¯è®©ç”¨æˆ·æ›¿æ¢èƒŒæ™¯é¢œè‰²ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- main page --&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  fancy-tabs &#123;</span><br><span class="line">    margin-bottom: 32px;</span><br><span class="line">    --fancy-tabs-bg: black;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;fancy-tabs background&gt;...&lt;/fancy-tabs&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨å…¶ shadow DOM å†…éƒ¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:host([background]) &#123;</span><br><span class="line">  background: var(--fancy-tabs-bg, #9E9E9E);</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œè¯¥ç»„ä»¶å°†ä½¿ç”¨ <code>black</code> ä½œä¸ºèƒŒæ™¯å€¼ï¼Œå› ä¸ºç”¨æˆ·æŒ‡å®šäº†è¯¥å€¼ã€‚ å¦åˆ™èƒŒæ™¯é¢œè‰²å°†é‡‡ç”¨é»˜è®¤å€¼ <code>#9E9E9E</code>ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="é¿å…åœ¨ç»„ä»¶ä¸­åˆ›å»º-closed-shadow-root"><a href="#é¿å…åœ¨ç»„ä»¶ä¸­åˆ›å»º-closed-shadow-root" class="headerlink" title="é¿å…åœ¨ç»„ä»¶ä¸­åˆ›å»º closed shadow root"></a>é¿å…åœ¨ç»„ä»¶ä¸­åˆ›å»º closed shadow root</h3><p>shadow DOM çš„å¦ä¸€æƒ…å†µç§°ä¸º<strong>é—­åˆ</strong>æ¨¡å¼ã€‚åˆ›å»ºclosed shadow DOM tree åï¼Œåœ¨å¤–éƒ¨æ— æ³•é€šè¿‡ JavaScript è®¿é—®ç»„ä»¶çš„å†…éƒ¨ DOMã€‚è¿™ä¸ <code>&lt;video&gt;</code> ç­‰åŸç”Ÿå…ƒç´ å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼ŒJavaScript æ— æ³•è®¿é—® <code>&lt;video&gt;</code> çš„ shadow DOMï¼Œå› ä¸ºæµè§ˆå™¨ä½¿ç”¨closed shadow rootæ¥å®ç°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const div = document.createElement(&#x27;div&#x27;);</span><br><span class="line">const shadowRoot = div.attachShadow(&#123;mode: &#x27;closed&#x27;&#125;); // close shadow tree</span><br><span class="line">// div.shadowRoot === null</span><br><span class="line">// shadowRoot.host === div</span><br></pre></td></tr></table></figure>

<h3 id="å…³äº-slot-çš„-API"><a href="#å…³äº-slot-çš„-API" class="headerlink" title="å…³äº slot çš„ API"></a>å…³äº slot çš„ API</h3><p><strong><code>slotchange</code> äº‹ä»¶</strong></p>
<p>å½“ slot çš„åˆ†å¸ƒå¼èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>slotchange</code> äº‹ä»¶ä¼šè§¦å‘ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä» light DOM ä¸­æ·»åŠ &#x2F;ç§»é™¤å­é¡¹æ—¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const slot = this.shadowRoot.querySelector(&#x27;#slot&#x27;);</span><br><span class="line">slot.addEventListener(&#x27;slotchange&#x27;, e =&gt; &#123;</span><br><span class="line">  console.log(&#x27;light dom children changed!&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šå½“ç»„ä»¶çš„å®ä¾‹é¦–æ¬¡åˆå§‹åŒ–æ—¶ï¼Œ<code>slotchange</code> ä¸è§¦å‘ã€‚</p>
<p><strong>æŸ¥çœ‹ slot ä¸­æ¸²æŸ“çš„å…ƒç´ </strong><br>è°ƒç”¨ <code>slot.assignedNodes()</code> å¯æŸ¥çœ‹ slot æ­£åœ¨æ¸²æŸ“å“ªäº›å…ƒç´ ï¼›è¯¥æ–¹æ³•ä¸­ä¼ å…¥ <code>&#123;flatten: true&#125;</code> é€‰é¡¹å°†è¿”å› slot çš„å¤‡ç”¨å†…å®¹fallbcak contentï¼ˆå‰ææ˜¯æ²¡æœ‰åˆ†å¸ƒä»»ä½•èŠ‚ç‚¹ï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th>ç”¨æ³•</th>
<th>è°ƒç”¨</th>
<th>ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;button is=&quot;better-button&quot;&gt;My button&lt;/button&gt;</code></td>
<td>slot.assignedNodes();</td>
<td>[text]</td>
</tr>
<tr>
<td><code>&lt;button is=&quot;better-button&quot;&gt;&lt;/button&gt;</code></td>
<td>slot.assignedNodes();</td>
<td>[]</td>
</tr>
<tr>
<td><code>&lt;button is=&quot;better-button&quot;&gt;&lt;/button&gt;</code></td>
<td>slot.assignedNodes({flatten: true});</td>
<td>[<b>fallback content</b>]</td>
</tr>
</tbody></table>
<p><strong>æŸ¥çœ‹å…ƒç´ æ¸²æŸ“åœ¨å“ªä¸ª slot ä¸­</strong><br><code>element.assignedSlot</code> å°†å‘Šè¯‰æ‚¨å…ƒç´ åˆ†é…åˆ°ç»„ä»¶çš„å“ªä¸ª slotã€‚</p>
<h3 id="Shadow-DOM-äº‹ä»¶æ¨¡å‹"><a href="#Shadow-DOM-äº‹ä»¶æ¨¡å‹" class="headerlink" title="Shadow DOM äº‹ä»¶æ¨¡å‹"></a>Shadow DOM äº‹ä»¶æ¨¡å‹</h3><p>å½“äº‹ä»¶ä» shadow DOM ä¸­è§¦å‘æ—¶ï¼Œå…¶ç›®æ ‡ target ä¸ºç»´æŒ shadow DOM çš„å°è£…ï¼Œä¸æš´éœ² shadow DOM ä¸­çš„å†…å®¹å…ƒç´ ï¼Œä¼šè¿›è¡Œé‡ç½® retargetï¼Œçœ‹èµ·æ¥äº‹ä»¶æ˜¯æ¥è‡ªç»„ä»¶æœ¬èº«ï¼Œè€Œä¸æ˜¯ç»„ä»¶ä¸­ shadow DOM ä¸­çš„å†…å®¹å…ƒç´ ã€‚</p>
<p>å¤§éƒ¨åˆ†äº‹ä»¶éƒ½ä¼šè·¨è¿‡ shadow DOM è¾¹ç•Œï¼Œå‘å¤–ä¼ æ’­ï¼š</p>
<ul>
<li>èšç„¦äº‹ä»¶ï¼šblurã€focusã€focusinã€focusout</li>
<li>é¼ æ ‡äº‹ä»¶ï¼šclickã€dblclickã€mousedownã€mouseenterã€mousemoveï¼Œç­‰ç­‰</li>
<li>æ»šè½®äº‹ä»¶ï¼šwheel</li>
<li>è¾“å…¥äº‹ä»¶ï¼šbeforeinputã€input</li>
<li>é”®ç›˜äº‹ä»¶ï¼škeydownã€keyup</li>
<li>ç»„åˆäº‹ä»¶ï¼šcompositionstartã€compositionupdateã€compositionend</li>
<li>æ‹–æ”¾äº‹ä»¶ï¼šdragstartã€dragã€dragendã€dropï¼Œç­‰ç­‰</li>
</ul>
<p>å¯¹äº <code>mode</code> ä¸º <code>open</code> çš„ shadow DOMï¼Œäº‹ä»¶å›è°ƒä¸­ï¼Œè°ƒç”¨ <code>event.composedPath()</code> å°†è¿”å›äº‹ä»¶å‘ä¸Šä¼ æ’­ç»è¿‡çš„èŠ‚ç‚¹è·¯å¾„ã€‚</p>
<p>å¯¹äºç»„ä»¶å†…çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¸ä¼šä¼ æ’­å‡º shadow DOMï¼Œé™¤éäº‹ä»¶åˆ›å»ºæ—¶æŒ‡å®š <code>composed: true</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Inside &lt;fancy-tab&gt; custom element class definition:</span><br><span class="line">selectTab() &#123;</span><br><span class="line">  const tabs = this.shadowRoot.querySelector(&#x27;#tabs&#x27;);</span><br><span class="line">  tabs.dispatchEvent(new Event(&#x27;tab-select&#x27;, &#123;bubbles: true, composed: true&#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>composed: false</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œç”¨æˆ·æ— æ³•åœ¨ç»„ä»¶å¤–éƒ¨ä¾¦å¬åˆ°è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;fancy-tabs&gt;&lt;/fancy-tabs&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const tabs = document.querySelector(&#x27;fancy-tabs&#x27;);</span><br><span class="line">  tabs.addEventListener(&#x27;tab-select&#x27;, e =&gt; &#123;</span><br><span class="line">    // won&#x27;t fire if `tab-select` wasn&#x27;t created with `composed: true`.</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p>æœ¬æ–‡ä¸»è¦æ˜¯é˜…è¯» <strong>Shadow DOM v1: Self-Contained Web Components</strong> åï¼Œç†è§£æ•´ç†è€Œæ¥ã€‚<br>è‹±æ–‡åŸæ–‡ï¼š<a href="https://developers.google.com/web/fundamentals/web-components/shadowdom">Shadow DOM v1: Self-Contained Web Components</a><br>ä¸­æ–‡ç¿»è¯‘ï¼š<a href="https://developers.google.com/web/fundamentals/web-components/best-practices?hl=zh-cn">Shadow DOM v1ï¼šç‹¬ç«‹çš„ç½‘ç»œç»„ä»¶</a></p>

        </div>
    
<!-- tags -->

    <div class="post-meta">
        æ ‡ç­¾ï¼š
        
            <a href="/tags/javascript/"> / javascript</a>
        
    </div>

</div>
                <div class="footer">
    <span>Copyright Â© <script>document.write(new Date().getFullYear())</script> ç™½äº‘é›…é˜</span>
    <span>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https:///imzl.com/zenmind">ZenMind</a></span>
    <span>å¤‡æ¡ˆå·<a href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2024093046å·-1</a></span>
</div>

<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>

<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>