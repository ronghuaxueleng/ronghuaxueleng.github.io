<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <meta name="robots" content="index, follow">
  <!-- title -->
  
    
  <title>Fullscreen API：全屏操作 - 白云雅阁</title>
    
  
  
  <!-- open graph -->
  <meta name="description" content="全屏API可以控制浏览器的全屏显示，让一个Element节点（以及子节点）占满用户的整个屏幕。目前各大浏览器的最新版本都支持这个API（包括IE11），但是使用的时候需要加上浏览器前缀。">
<meta property="og:type" content="article">
<meta property="og:title" content="Fullscreen API：全屏操作">
<meta property="og:url" content="http://ronghuaxueleng.github.io/archives/77cd0e45.html">
<meta property="og:site_name" content="白云雅阁">
<meta property="og:description" content="全屏API可以控制浏览器的全屏显示，让一个Element节点（以及子节点）占满用户的整个屏幕。目前各大浏览器的最新版本都支持这个API（包括IE11），但是使用的时候需要加上浏览器前缀。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-09-25T00:00:00.000Z">
<meta property="article:modified_time" content="2025-03-09T08:43:48.236Z">
<meta property="article:author" content="ronghuaxueleng">
<meta property="article:tag" content="api">
<meta name="twitter:card" content="summary">
  <!-- canonical -->
  
  <link rel="canonical" href="http://ronghuaxueleng.github.io/archives/77cd0e45.html">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <!-- CSS -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 7.3.0"></head>

    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">白云雅阁</a>
    <!-- <div class="logo"><a href="/" title="Len"><img src="/img/logo.svg" alt="Len" aria-label="logo" height="20"></a></div> -->
        <ul class="nav">
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
        </ul>


    </a>
</div>

                
                <div class="post-main">
    
        <div class="post-main-title">
            Fullscreen API：全屏操作
        </div>
        <div class="post-meta">
            2016-09-25 ｜ 
            
                <a href="/categories/htmlapi/"># htmlapi</a>
            
        </div>
        <!-- 圆角分类 -->
        <!-- <div class="tags"> -->
            <!--  -->
                <!-- <a href="/categories/htmlapi/">htmlapi</a> -->
            <!--  -->
        <!-- </div> -->
        <div class="post-md">
            <p>全屏API可以控制浏览器的全屏显示，让一个Element节点（以及子节点）占满用户的整个屏幕。目前各大浏览器的最新版本都支持这个API（包括IE11），但是使用的时候需要加上浏览器前缀。</p>
<span id="more"></span>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="requestFullscreen"><a href="#requestFullscreen" class="headerlink" title="requestFullscreen()"></a>requestFullscreen()</h3><p>Element节点的requestFullscreen方法，可以使得这个节点全屏。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">launchFullscreen</span>(<span class="params">element</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(element.<span class="property">requestFullscreen</span>) &#123;</span><br><span class="line">    element.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(element.<span class="property">mozRequestFullScreen</span>) &#123;</span><br><span class="line">    element.<span class="title function_">mozRequestFullScreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(element.<span class="property">msRequestFullscreen</span>)&#123;</span><br><span class="line">    element.<span class="title function_">msRequestFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(element.<span class="property">webkitRequestFullscreen</span>) &#123;</span><br><span class="line">    element.<span class="title function_">webkitRequestFullScreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">launchFullscreen</span>(<span class="variable language_">document</span>.<span class="property">documentElement</span>);</span><br><span class="line"><span class="title function_">launchFullscreen</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;videoElement&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>放大一个节点时，Firefox和Chrome在行为上略有不同。Firefox自动为该节点增加一条CSS规则，将该元素放大至全屏状态，<code>width: 100%; height: 100%</code>，而Chrome则是将该节点放在屏幕的中央，保持原来大小，其他部分变黑。为了让Chrome的行为与Firefox保持一致，可以自定义一条CSS规则。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:-webkit-full-screen #myvideo &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="exitFullscreen"><a href="#exitFullscreen" class="headerlink" title="exitFullscreen()"></a>exitFullscreen()</h3><p>document对象的exitFullscreen方法用于取消全屏。该方法也带有浏览器前缀。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">exitFullscreen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">exitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">msExitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">msExitFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">mozCancelFullScreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">mozCancelFullScreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">webkitExitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">webkitExitFullscreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">exitFullscreen</span>();</span><br></pre></td></tr></table></figure>

<p>用户手动按下ESC键或F11键，也可以退出全屏键。此外，加载新的页面，或者切换tab，或者从浏览器转向其他应用（按下Alt-Tab），也会导致退出全屏状态。</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><h3 id="document-fullscreenElement"><a href="#document-fullscreenElement" class="headerlink" title="document.fullscreenElement"></a>document.fullscreenElement</h3><p>fullscreenElement属性返回正处于全屏状态的Element节点，如果当前没有节点处于全屏状态，则返回null。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fullscreenElement =</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">fullscreenElement</span> ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">mozFullScreenElement</span> ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">webkitFullscreenElement</span>;</span><br></pre></td></tr></table></figure>

<h3 id="document-fullscreenEnabled"><a href="#document-fullscreenEnabled" class="headerlink" title="document.fullscreenEnabled"></a>document.fullscreenEnabled</h3><p>fullscreenEnabled属性返回一个布尔值，表示当前文档是否可以切换到全屏状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fullscreenEnabled =</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">fullscreenEnabled</span> ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">mozFullScreenEnabled</span> ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">webkitFullscreenEnabled</span> ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">msFullscreenEnabled</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (fullscreenEnabled) &#123;</span><br><span class="line">  videoElement.<span class="title function_">requestFullScreen</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;浏览器当前不能全屏&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="全屏事件"><a href="#全屏事件" class="headerlink" title="全屏事件"></a>全屏事件</h2><p>以下事件与全屏操作有关。</p>
<ul>
<li><p>fullscreenchange事件：浏览器进入或离开全屏时触发。</p>
</li>
<li><p>fullscreenerror事件：浏览器无法进入全屏时触发，可能是技术原因，也可能是用户拒绝。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;fullscreenchange&quot;</span>, <span class="keyword">function</span>(<span class="params"> event </span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">fullscreenElement</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;进入全屏&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;退出全屏&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上面代码在发生fullscreenchange事件时，通过fullscreenElement属性判断，到底是进入全屏还是退出全屏。</p>
<h2 id="全屏状态的CSS"><a href="#全屏状态的CSS" class="headerlink" title="全屏状态的CSS"></a>全屏状态的CSS</h2><p>全屏状态下，大多数浏览器的CSS支持<code>:full-screen</code>伪类，只有IE11支持<code>:fullscreen</code>伪类。使用这个伪类，可以对全屏状态设置单独的CSS属性。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:-webkit-full-screen &#123;</span><br><span class="line">  <span class="comment">/* properties */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:-moz-full-screen &#123;</span><br><span class="line">  <span class="comment">/* properties */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:-ms-fullscreen &#123;</span><br><span class="line">  <span class="comment">/* properties */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:full-screen &#123; <span class="comment">/*pre-spec */</span></span><br><span class="line">  <span class="comment">/* properties */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:fullscreen</span> &#123; <span class="comment">/* spec */</span></span><br><span class="line">  <span class="comment">/* properties */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* deeper elements */</span></span><br><span class="line">:-webkit-full-screen video &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li>David Walsh, <a href="http://davidwalsh.name/fullscreen">Fullscreen API</a></li>
<li>David Storey, <a href="http://generatedcontent.org/post/70347573294/is-your-fullscreen-api-code-up-to-date-find-out-how-to">Is your Fullscreen API code up to date? Find out how to make it work the same in modern browsers</a></li>
</ul>

        </div>
    
<!-- tags -->

    <div class="post-meta">
        标签：
        
            <a href="/tags/api/"> / api</a>
        
    </div>

</div>
                <div class="footer">
    <span>Copyright © <script>document.write(new Date().getFullYear())</script> 白云雅阁</span>
    <span>Powered by <a href="https://hexo.io">Hexo</a> with <a href="https:///imzl.com/zenmind">ZenMind</a></span>
    <span>备案号<a href="https://beian.miit.gov.cn/" target="_blank">京ICP备2024093046号-1</a></span>
</div>

<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>

<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>